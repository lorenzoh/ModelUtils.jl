<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reference · ModelUtils.jl</title><link rel="canonical" href="https://lorenzoh.github.io/ModelUtils.jl/lib/public.html"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">ModelUtils.jl</span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="public.html">Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="public.html">Reference</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/lorenzoh/ModelUtils.jl/blob/master/docs/src/lib/public.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Reference-1"><a class="docs-heading-anchor" href="#Reference-1">Reference</a><a class="docs-heading-anchor-permalink" href="#Reference-1" title="Permalink"></a></h1><p>Reference for <code>ModelUtils.jl</code></p><h2 id="Index-1"><a class="docs-heading-anchor" href="#Index-1">Index</a><a class="docs-heading-anchor-permalink" href="#Index-1" title="Permalink"></a></h2><ul><li><a href="public.html#ModelUtils.Hook"><code>ModelUtils.Hook</code></a></li><li><a href="public.html#ModelUtils.Initialization"><code>ModelUtils.Initialization</code></a></li><li><a href="public.html#ModelUtils.Model"><code>ModelUtils.Model</code></a></li><li><a href="public.html#ModelUtils.IterLayers"><code>ModelUtils.IterLayers</code></a></li><li><a href="public.html#ModelUtils.IterModels"><code>ModelUtils.IterModels</code></a></li><li><a href="public.html#ModelUtils.addhook"><code>ModelUtils.addhook</code></a></li><li><a href="public.html#ModelUtils.gradientsdict"><code>ModelUtils.gradientsdict</code></a></li><li><a href="public.html#ModelUtils.init!"><code>ModelUtils.init!</code></a></li><li><a href="public.html#ModelUtils.init_kaiming_normal"><code>ModelUtils.init_kaiming_normal</code></a></li><li><a href="public.html#ModelUtils.init_kaiming_uniform"><code>ModelUtils.init_kaiming_uniform</code></a></li><li><a href="public.html#ModelUtils.initmodel!"><code>ModelUtils.initmodel!</code></a></li><li><a href="public.html#ModelUtils.mapmodel"><code>ModelUtils.mapmodel</code></a></li><li><a href="public.html#ModelUtils.paramsdict"><code>ModelUtils.paramsdict</code></a></li><li><a href="public.html#ModelUtils.printmodel"><code>ModelUtils.printmodel</code></a></li></ul><h2 id="Public-Interface-1"><a class="docs-heading-anchor" href="#Public-Interface-1">Public Interface</a><a class="docs-heading-anchor-permalink" href="#Public-Interface-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="ModelUtils.IterLayers" href="#ModelUtils.IterLayers"><code>ModelUtils.IterLayers</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">IterLayers(model::Model)</code></pre><p>Pre-order (parents before children) iterator over all wrapped layers.</p><p>Example</p><pre><code class="language-julia">&gt; model = Model(Chain(Conv((3, 3), 3 =&gt; 16), BatchNorm(16)))
&gt; collect(IterModels(model))

[Chain{...}, Conv{...}, BatchNorm{...}]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lorenzoh/ModelUtils.jl/blob/5ed4ad2b45fcfb9a5c5d92e3c8f53e95f5088261/src/model.jl#LL86-L98">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelUtils.IterModels" href="#ModelUtils.IterModels"><code>ModelUtils.IterModels</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">IterModels(model::Model)</code></pre><p>Pre-order (parents before children) iterator over all <code>Model</code>s. If you want to iterate over the wrapped layers instead, use <a href="public.html#ModelUtils.IterLayers"><code>IterLayers</code></a>.</p><p>Example</p><pre><code class="language-julia">&gt; model = Model(Chain(Conv((3, 3), 3 =&gt; 16), BatchNorm(16)))
&gt; collect(IterModels(model))

[Model{Chain{...}}, Model{Conv{...}}, Model{BatchNorm{...}}]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lorenzoh/ModelUtils.jl/blob/5ed4ad2b45fcfb9a5c5d92e3c8f53e95f5088261/src/model.jl#LL69-L83">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelUtils.Model" href="#ModelUtils.Model"><code>ModelUtils.Model</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Model(layer)</code></pre><p>Wrapper for Flux layer that recursively wraps children layers.</p><p>Use <code>model.layer</code> to access wrapped layer</p><p>Use <code>children(model)</code> to access children wrappers</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lorenzoh/ModelUtils.jl/blob/5ed4ad2b45fcfb9a5c5d92e3c8f53e95f5088261/src/model.jl#LL7-L15">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelUtils.Hook" href="#ModelUtils.Hook"><code>ModelUtils.Hook</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Hook(layer, [forward, backward, state = Dict()])</code></pre><p>Wraps a Flux layer, and holds a Dict with state (<code>Hook.state</code>)</p><p>After the forward pass of the wrapped layer calls <code>Hook.forward(state, layeroutput)</code> After the gradient calculation of the wrapped layer calls <code>Hook.backward(state, layergradient)</code></p><p>For adding hooks to existing models, see <a href="public.html#ModelUtils.addhook"><code>addhook</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lorenzoh/ModelUtils.jl/blob/5ed4ad2b45fcfb9a5c5d92e3c8f53e95f5088261/src/hooks.jl#LL6-L15">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelUtils.addhook" href="#ModelUtils.addhook"><code>ModelUtils.addhook</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">addhook(model; [forward, backward, filter_fn])</code></pre><p>Add a <a href="public.html#ModelUtils.Hook"><code>Hook</code></a> with callbacks <code>forward</code> and <code>backward</code> to all layers of <code>model</code> where <code>filter_fn(layer) == true</code>.</p><p>See <a href="public.html#ModelUtils.Hook"><code>Hook</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lorenzoh/ModelUtils.jl/blob/5ed4ad2b45fcfb9a5c5d92e3c8f53e95f5088261/src/hooks.jl#LL31-L38">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelUtils.mapmodel" href="#ModelUtils.mapmodel"><code>ModelUtils.mapmodel</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">mapmodel(f, model::M, [constructor])</code></pre><p>Applies <code>f</code> to every layer, resulting in a new model.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The model layer structs are copied in the process, but the fields are not, hence the resulting model will have the same parameters!</p></div></div><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The copying is done by first recursively applying <code>mapmodel</code> to all children fields and then attempting to create a new object of type <code>M</code> with the default outer constructor <code>M(fields...)</code>.</p></div></div><p>If your custom type does not have a constructor of that form, like e.g. <code>Flux.Chain</code>, you will have to extend this function with a signature like</p><pre><code class="language-none">`mapmodel(f, model::MyType, (fields) -&gt; ...)`</code></pre><p>where the last argument results in a <code>MyType(fields...)</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lorenzoh/ModelUtils.jl/blob/5ed4ad2b45fcfb9a5c5d92e3c8f53e95f5088261/src/map.jl#LL1-L25">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelUtils.paramsdict" href="#ModelUtils.paramsdict"><code>ModelUtils.paramsdict</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">paramsdict(model::Model) -&gt; Dict{Symbol, Array}</code></pre><p>Return a Dict with mapping parameter name =&gt; parameter value.</p><p>Useful for inspecting the distribution of parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lorenzoh/ModelUtils.jl/blob/5ed4ad2b45fcfb9a5c5d92e3c8f53e95f5088261/src/introspection.jl#LL6-L12">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelUtils.gradientsdict" href="#ModelUtils.gradientsdict"><code>ModelUtils.gradientsdict</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">gradientsdict(model::Model, gs::Grads) -&gt; Dict{Symbol, Array}</code></pre><p>Return a Dict with mapping parameter name =&gt; gradient value</p><p>Useful for inspecting the distribution of gradients.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lorenzoh/ModelUtils.jl/blob/5ed4ad2b45fcfb9a5c5d92e3c8f53e95f5088261/src/introspection.jl#LL30-L36">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelUtils.printmodel" href="#ModelUtils.printmodel"><code>ModelUtils.printmodel</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">printmodel(model)</code></pre><p>Print <code>model</code> as a tree</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lorenzoh/ModelUtils.jl/blob/5ed4ad2b45fcfb9a5c5d92e3c8f53e95f5088261/src/model.jl#LL121-L125">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelUtils.Initialization" href="#ModelUtils.Initialization"><code>ModelUtils.Initialization</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Initialization(layertype, field, initializer)</code></pre><p>Describes an initialization for field <code>field</code> of all layers of type <code>layertype</code> to be initialized with <code>initializer</code>.</p><p>Use <a href="public.html#ModelUtils.initmodel!"><code>initmodel!</code></a> to apply to a model.</p><p><strong>Example</strong></p><p><code>Initialization(Conv, :bias, init_zeros)</code> -&gt; initialize the bias of all Conv layers with zeros.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lorenzoh/ModelUtils.jl/blob/5ed4ad2b45fcfb9a5c5d92e3c8f53e95f5088261/src/initialization.jl#LL47-L59">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelUtils.init_kaiming_normal" href="#ModelUtils.init_kaiming_normal"><code>ModelUtils.init_kaiming_normal</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">init_normal_uniform(T, dims...; gain=sqrt(2))</code></pre><p>Kaiming normal initializer</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lorenzoh/ModelUtils.jl/blob/5ed4ad2b45fcfb9a5c5d92e3c8f53e95f5088261/src/initialization.jl#LL32-L36">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelUtils.init_kaiming_uniform" href="#ModelUtils.init_kaiming_uniform"><code>ModelUtils.init_kaiming_uniform</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">init_kaiming_uniform(T, dims...; gain=sqrt(2))</code></pre><p>Kaiming uniform initializer</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lorenzoh/ModelUtils.jl/blob/5ed4ad2b45fcfb9a5c5d92e3c8f53e95f5088261/src/initialization.jl#LL20-L24">source</a></section></article><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>init_zeros</code>. Check Documenter&#39;s build log for details.</p></div></div><article class="docstring"><header><a class="docstring-binding" id="ModelUtils.init!" href="#ModelUtils.init!"><code>ModelUtils.init!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">init!(a, initializer)</code></pre><p>Initialize an array <code>a</code> with <code>initializer</code>.</p><p>Example</p><pre><code class="language-julia">layer = Conv((3, 3), 3 =&gt; 16)
init!(layer.weight, init_kaiming_normal)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lorenzoh/ModelUtils.jl/blob/5ed4ad2b45fcfb9a5c5d92e3c8f53e95f5088261/src/initialization.jl#LL4-L15">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ModelUtils.initmodel!" href="#ModelUtils.initmodel!"><code>ModelUtils.initmodel!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">initmodel!(model, inits::Vector{Initialization})</code></pre><p>Applies <code>inits</code> to <code>model</code>.</p><p>See <a href="public.html#ModelUtils.Initialization"><code>Initialization</code></a>.</p><p><strong>Example</strong></p><pre><code class="language-julia">model = Chain(Dense(10, 10), Dense(10, 10))
initmodel!(model, [
    Initialization(Dense, :W, init_kaiming_normal),
    Initialization(Dense, :bias, init_zeros)
])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/lorenzoh/ModelUtils.jl/blob/5ed4ad2b45fcfb9a5c5d92e3c8f53e95f5088261/src/initialization.jl#LL66-L82">source</a></section></article></article></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 27 March 2020 15:43">Friday 27 March 2020</span>. Using Julia version 1.0.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
